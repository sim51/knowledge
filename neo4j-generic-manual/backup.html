<!DOCTYPE html><html lang="" ng-app="knowledge"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.2"><title>Sauvegarde</title><link type="text/css" rel="stylesheet" href="/dist/css/application.css" media="all"></head><body class="article"><header class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container-fluid"><div class="navbar-header"><a title="Home" href="/" class="navbar-brand"><img alt="Neo4j" src="/dist/assets/images/logo.png"></a></div><nav class="collapse navbar-collapse  hidden-print" ng-controller="MenuCtrl"><form class="form-search pull-right form-inline  hidden-print" role="search" action="/" method="get"><div class="form-group"><label for="search"><Recherche></Recherche></label><div class="input-append"><input type="text" placeholder="Search" class="input-large search-query" name="search" value="" id="search"><button class="btn" type="submit"><i class="fa fa-search"></i></button></div></div></form></nav></div></header><main class="container-fluid"><article class="row-fluid" itemscope="" itemtype="http://schema.org/Article"><header></header><section itemprop="articleBody"><section class="sect2"><h3 id="_sauvegarde">Sauvegarde</h3></section>
<section class="sect2"><h3 id="_version_communautaire">Version Communautaire</h3><div class="paragraph"><p>Toutes les données sont stockés dans le répertoire <code>data/graph.db</code>.
Ainsi pour effectuer une sauvegarder des données, voici la marche à suivre :</p></div>
<div class="ulist"><ul><li><p>Eteindre le service Neo4j</p></li><li><p>Sauvegarder le répertoire <code>data/graph.db</code></p></li><li><p>Redémarrer le service Neo4j</p></li></ul></div>
<div class="paragraph"><p>Comme vous pouvez le constater, la sauvegarde ne peut se faire uniquement si le service est éteint.</p></div></section>
<section class="sect2"><h3 id="_version_entreprise">Version Entreprise</h3><div class="paragraph"><p>Dans sa version Entreprise, Neo4j dispose d&#8217;un outil de sauvegarde à chaud. Cet outil réalise deux actions :</p></div>
<div class="ulist"><ul><li><p>une copie du répertoire <code>data/graph.db</code> dans le répertoire spécifié</p></li><li><p>une vérification de la cohérence des données</p></li></ul></div>
<div class="paragraph"><p>Voici la commande pour l&#8217;exécuter :</p></div>
<div class="listingblock"><div class="content"><textarea class="code_highlight">$&gt;bin/neo4j-backup -to BACKUP_FOLDER -host NEO4J_IP -port BACKUP_PORT</textarea></div></div>
<div class="paragraph"><p>Où :</p></div>
<div class="ulist"><ul><li><p><strong>BACKUP_FOLDER</strong> : est le répertoire vers lequel la sauvegarde sera réalisée. Si celui-ci contient déjà une précédent sauvegarde, l&#8217;outil va réaliser un delta avec la base (sauvegarde incrémentale).</p></li><li><p><strong>NEO4J_HOST</strong> : l&#8217;adresse IP de la machine Neo4j. Vu que l&#8217;utilitaire de savegarde est généralement sur la même machine que le serveur Neo4j, on utilise <code>localhost</code></p></li><li><p><strong>BACKUP_PORT</strong> : Le port sur lequel Neo4j écoute les instructions de savegarde. Par défaut celui-ci est <code>6362</code>. Celui-ci peut être changé en modifiant la clef <code>online_backup_server</code> du fichier <code>conf.neo4j.properties</code>.</p></li></ul></div>
<div class="paragraph"><p>Même si la technique de sauvegarde peut être incrémetale, son livrable correspond toujours à l&#8217;intégralité de la base (ie. le répertoire <code>data/graph.db</code>).</p></div>
<div class="paragraph"><p>Ce qui est généralement mis en place, c&#8217;est un cron qui toutes les heures vient faire la savegarde de manière incrémentale.
Puis une fois par jour, le répertoire est zippé et envoyé sur SAN/FTP/&#8230;&#8203; pour une sauvegarde à long terme.</p></div></section></section><footer><div id="footer-text">&nbsp;|&nbsp; &nbsp;|&nbsp; <strong>Updated:&nbsp;</strong><time itemprop="dateModified" datetime="2015-11-03 18:07:10 CET">2015-11-03 18:07:10 CET</time>&nbsp;|&nbsp; </div></footer></article></main><script src="/dist/js/knwoledge-base.doc.min.js"></script></body></html>