<!DOCTYPE html><html lang="" ng-app="knowledge"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.2"><title>Monitoring</title><link type="text/css" rel="stylesheet" href="/dist/css/application.css" media="all"></head><body class="article"><header class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container-fluid"><div class="navbar-header"><a title="Home" href="/" class="navbar-brand"><img alt="Neo4j" src="/dist/assets/images/logo.png"></a></div><nav class="collapse navbar-collapse  hidden-print" ng-controller="MenuCtrl"><form class="form-search pull-right form-inline  hidden-print" role="search" action="/" method="get"><div class="form-group"><label for="search"><Recherche></Recherche></label><div class="input-append"><input type="text" placeholder="Search" class="input-large search-query" name="search" value="" id="search"><button class="btn" type="submit"><i class="fa fa-search"></i></button></div></div></form></nav></div></header><main class="container-fluid"><article class="row-fluid" itemscope="" itemtype="http://schema.org/Article"><header></header><section itemprop="articleBody"><section class="sect2"><h3 id="_monitoring">Monitoring</h3><div class="paragraph"><p>Au niveau du monitoring, il faut le faire à deux niveaux :</p></div>
<div class="ulist"><ul><li><p>celui de la machine</p></li><li><p>celui de Neo4j</p></li></ul></div>
<section class="sect3"><h4 id="_monitoring_de_la_machine">Monitoring de la machine</h4><div class="paragraph"><p>La c&#8217;est du standard au niveau monitoring.
Voici une liste d&#8217;indicateur à surveiller :</p></div>
<div class="ulist"><ul><li><p>CPU</p></li><li><p>RAM</p></li><li><p>I/O disque</p></li><li><p>I/O interface réseau</p></li><li><p>l&#8217;espace disque</p></li></ul></div></section>
<section class="sect3"><h4 id="_monitoring_neo4j">Monitoring Neo4j</h4><div class="paragraph"><p>Neo4j met à disposition via le protocole JMX ou REST des Mbean Java (ie. des sondes dans la JVM).
La liste des MBean accessibles est présentée ici : <a class="bare" href="http://neo4j.com/docs/stable/jmx-mxbeans.html">http://neo4j.com/docs/stable/jmx-mxbeans.html</a>.</p></div>
<div class="paragraph"><p>Sur une JVM, le plus important est de monitorer le garbage collector ainsi que la consommation de la HEAP.</p></div>
<div class="paragraph"><p>Dans sa version Entreprise, Neo4j s&#8217;intègre nativement avec les outils de métriques suivants :</p></div>
<div class="ulist"><ul><li><p>Graphite</p></li><li><p>Ganglia</p></li></ul></div>
<div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content">voir aussi la section sur la configuration des logs pour activer les logs du GC</td></tr></table></div>
<div class="paragraph"><p>NOTE : <a class="bare" href="http://www.markhneedham.com/blog/2013/10/20/neo4j-accessing-jmx-beans-via-http/">http://www.markhneedham.com/blog/2013/10/20/neo4j-accessing-jmx-beans-via-http/</a></p></div>
<section class="sect4"><h5 id="_activation_jmx">Activation JMX</h5><div class="paragraph"><p>Pour 'activer le monitoring JMX dans Neo4j, il suffit de décommenter les lignes suivantes dans le fichier`conf/neo4j-wrapper.conf` :</p></div>
<div class="listingblock"><div class="content"><textarea class="code_highlight">wrapper.java.additional=-Dcom.sun.management.jmxremote.port=3637
wrapper.java.additional=-Dcom.sun.management.jmxremote.authenticate=true
wrapper.java.additional=-Dcom.sun.management.jmxremote.ssl=false
wrapper.java.additional=-Dcom.sun.management.jmxremote.password.file=conf/jmx.password
wrapper.java.additional=-Dcom.sun.management.jmxremote.access.file=conf/jmx.access</textarea></div></div>
<div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content">Attention aux droits UNIX des fichiers jmx.password &amp; jmx.access, il faut qu&#8217;il soit en READ uniquement pour le user qui lance le serveur Neo4j.</td></tr></table></div></section>
<section class="sect4"><h5 id="_accès_via_http">Accès via HTTP</h5><div class="listingblock"><div class="content"><textarea class="code_highlight">curl -H "Content-Type:application/json" http://localhost:7474/db/manage/server/jmx/domain/*/*</textarea></div></div></section></section></section></section><footer><div id="footer-text">&nbsp;|&nbsp; &nbsp;|&nbsp; <strong>Updated:&nbsp;</strong><time itemprop="dateModified" datetime="2015-11-04 22:25:25 CET">2015-11-04 22:25:25 CET</time>&nbsp;|&nbsp; </div></footer></article></main><script src="/dist/js/knwoledge-base.doc.min.js"></script></body></html>